<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>FlowTodo API - 微信云托管</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #f5f7fa;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      background-color: #3498db;
      color: white;
      padding: 20px 0;
      text-align: center;
    }
    h1 {
      margin: 0;
      font-size: 2.5em;
    }
    h2 {
      color: #2980b9;
      border-bottom: 2px solid #e5e5e5;
      padding-bottom: 10px;
      margin-top: 40px;
    }
    h3 {
      color: #16a085;
      margin-top: 25px;
    }
    .api-section {
      background-color: white;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    .endpoint {
      background-color: #f9f9f9;
      padding: 15px;
      border-left: 4px solid #3498db;
      margin-bottom: 15px;
    }
    .method {
      font-weight: bold;
      color: #e74c3c;
      display: inline-block;
      width: 80px;
    }
    .url {
      font-family: monospace;
      color: #333;
    }
    pre {
      background-color: #f1f1f1;
      padding: 15px;
      border-radius: 3px;
      overflow-x: auto;
    }
    code {
      font-family: monospace;
    }
    footer {
      text-align: center;
      margin-top: 50px;
      padding: 20px;
      color: #7f8c8d;
      font-size: 0.9em;
    }
    .features {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 30px 0;
    }
    .feature-item {
      flex: 1;
      min-width: 250px;
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
      color: #3498db;
    }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <h1>FlowTodo API</h1>
      <p>基于微信云托管的任务管理应用后端服务</p>
    </div>
  </header>

  <div class="container">
    <section>
      <h2>概览</h2>
      <p>FlowTodo API 是一个任务管理应用的后端服务，提供用户认证、任务和目标管理功能。</p>
      
      <div class="features">
        <div class="feature-item">
          <div class="feature-icon">👤</div>
          <h3>用户管理</h3>
          <p>支持用户注册、登录和身份验证功能。</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">✅</div>
          <h3>任务管理</h3>
          <p>创建、查询、更新和删除任务，支持任务优先级、截止日期等功能。</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🎯</div>
          <h3>目标管理</h3>
          <p>创建和管理长期/活跃目标，将任务与目标关联。</p>
        </div>
      </div>
    </section>

    <section class="api-section">
      <h2>认证 API</h2>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/auth/register</span></p>
        <p>用户注册，创建新用户账户。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/auth/login</span></p>
        <p>用户登录，获取访问令牌。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/auth/refresh</span></p>
        <p>刷新访问令牌。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/auth/logout</span></p>
        <p>退出登录，使当前令牌失效。</p>
      </div>

      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/auth/me</span></p>
        <p>获取当前用户信息。</p>
      </div>
    </section>

    <section class="api-section">
      <h2>任务 API</h2>
      
      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/tasks</span></p>
        <p>获取所有任务，支持过滤、排序和按目标筛选。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/tasks</span></p>
        <p>创建新任务。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/tasks/{task_id}</span></p>
        <p>获取指定ID的任务。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">PUT</span> <span class="url">/api/tasks/{task_id}</span></p>
        <p>更新指定ID的任务。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">DELETE</span> <span class="url">/api/tasks/{task_id}</span></p>
        <p>删除指定ID的任务。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">PATCH</span> <span class="url">/api/tasks/{task_id}/toggle-complete</span></p>
        <p>切换任务的完成状态。</p>
      </div>
    </section>

    <section class="api-section">
      <h2>目标 API</h2>
      
      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/goals</span></p>
        <p>获取所有目标，支持按类型筛选。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">POST</span> <span class="url">/api/goals</span></p>
        <p>创建新目标。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/goals/{goal_id}</span></p>
        <p>获取指定ID的目标。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">PUT</span> <span class="url">/api/goals/{goal_id}</span></p>
        <p>更新指定ID的目标。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">DELETE</span> <span class="url">/api/goals/{goal_id}</span></p>
        <p>删除指定ID的目标。</p>
      </div>
      
      <div class="endpoint">
        <p><span class="method">GET</span> <span class="url">/api/goals/{goal_id}/tasks</span></p>
        <p>获取指定目标下的所有任务。</p>
      </div>
    </section>

    <section class="api-section">
      <h2>认证说明</h2>
      <p>除了注册和登录API外，所有API都需要在请求头中携带访问令牌：</p>
      <pre><code>Authorization: Bearer &lt;access_token&gt;</code></pre>
    </section>

    <section class="api-section">
      <h2>错误处理</h2>
      <p>API返回的错误格式统一为：</p>
      <pre><code>{
  "error": {
    "code": "string",
    "message": "string",
    "details": {}
  }
}</code></pre>
    </section>
  </div>

  <footer>
    <div class="container">
      <p>FlowTodo API - 基于微信云托管</p>
      <p>© 2023 FlowTodo. 保留所有权利。</p>
    </div>
  </footer>
</body>
</html>
